# PaySystem

## ğŸš€í”„ë¡œì íŠ¸ ì†Œê°œ

ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼ì˜ íŒë§¤ìë¥¼ ìœ„í•œ í†µê³„ ë° ì •ì‚° í”Œë«í¼ì…ë‹ˆë‹¤. ì½˜í…ì¸  ì„±ê³¼ì™€ ìˆ˜ìµì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

**ê°œë°œ ê¸°ê°„**

2024.10.16 ~ 2024.11.12 (4ì£¼)

**í”„ë¡œì íŠ¸ í˜¸ìŠ¤íŒ…**

[ê¹€í˜œë€](https://github.com/hiek2001)


## ğŸ’» Docker-Compose ì‹¤í–‰ ëª…ë ¹ì–´

```
docker-compose up -d
```



## ğŸ—‚ ERD

![ex_screenshot](./image/ERD.png)

## ğŸ“š API ëª…ì„¸ì„œ

[PaySystem API ëª…ì„¸ì„œ](https://documenter.getpostman.com/view/19722199/2sAY55ad9r)


## ğŸ› ê¸°ìˆ ìŠ¤íƒ
- Spring Boot, Spring Batch, Spring Security, Java, Gradle
- MySQL, JPA
- Redis
- Spring Cloud Gateway, Eureka, Resilience4J
- Docker-Compose, Github

## ğŸ— ì•„í‚¤í…ì³

![ex_screenshot](./image/paySystem_architecture.png)

## ğŸŒŸì£¼ìš” ê¸°ëŠ¥

### ë°±ì—”ë“œ
1. Spring Boot ê¸°ë°˜ RESTful API
    -  í™•ì¥ì„±ê³¼ ì‹¤ì‹œê°„ ì„±ëŠ¥ì„ ê³ ë ¤í•œ  ê°œë°œ
2. MSA ì•„í‚¤í…ì²˜
    -  ë¶€í•˜ ë¶„ì‚° ë° ì¥ì•  ë³µêµ¬ ê¸°ëŠ¥ì„ í¬í•¨
3. ëª¨ë…¸ë ˆí¬ êµ¬ì„±
    -  ì—¬ëŸ¬ ëª¨ë“ˆì„ í†µí•©í•˜ì—¬ ë°°í¬ ê´€ë¦¬ íš¨ìœ¨ì„±ì„ ë†’ì´ê³ , ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ í†µí•´ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€

### ë°ì´í„° ì²˜ë¦¬
1. ëŒ€ìš©ëŸ‰ ë°°ì¹˜ ì‘ì—… ë° íŒŒí‹°ì…”ë‹
    -  ì˜ìƒ ì¬ìƒ ë‚´ì—­ì„ ì¼ë³„, ì£¼ë³„, ì›”ë³„ë¡œ ì§‘ê³„í•˜ì—¬ ì •ì‚° ë° í†µê³„ ì¡°íšŒ ë°ì´í„°ë¡œ ì œê³µ
    -  ì •ì‚° ì„œë¹„ìŠ¤ì—ì„œ ë³‘ë ¬ ì²˜ë¦¬ ê¸°ë²•ì„ í†µí•´ ì²˜ë¦¬ ì†ë„ì™€ ë°ì´í„° ì‘ì—…ì„ ìµœì í™”
2. Redis ìºì‹±
    -  ì •ì‚° ì¡°íšŒ ë°ì´í„°ë¥¼ Redisì— ìºì‹±í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë¹ ë¥¸ ì‘ë‹µ ì œê³µ
3. MySQL ê¸°ë°˜ ë°ì´í„° ê´€ë¦¬
    -  ì•ˆì •ì ì¸ ë°ì´í„° ì €ì¥ ë° ì¡°íšŒë¥¼ ìœ„í•´ MySQLì„ í™œìš©í•´ ë°ì´í„°ë¥¼ ê´€ë¦¬

### ë¶€í•˜ ë¶„ì‚° ë° ì¥ì•  ë³µêµ¬
1. ë„ë©”ì¸ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬ ë° ë¡œë“œ ë°¸ëŸ°ì‹±
    -  ë¶€í•˜ ë¶„ì‚°ì„ ìœ„í•´ ë„ë©”ì¸ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬
    -  Spring Cloud Gateway, LoadBalancer, Eurekaë¥¼ í™œìš©í•˜ì—¬ ë¶€í•˜ê°€ í° ì„œë¹„ìŠ¤ì— ëŒ€í•´ ë‹¤ìˆ˜ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ë¶€í•˜ ë¶„ì‚°ì„ êµ¬í˜„

### ì£¼ìš” API ê¸°ëŠ¥
1. í†µê³„ ì¡°íšŒ API
    -  ì¼ë³„, ì£¼ë³„, ì›”ë³„ ì¡°íšŒìˆ˜ ë° ì¬ìƒ ì‹œê°„ì˜ Top5 ì¡°íšŒí•˜ì—¬ ì½˜í…ì¸ ì˜ ì¸ê¸°ë„ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŒ
2. ì •ì‚° ì¡°íšŒ API
    -  ì¼ë³„, ì£¼ë³„, ì›”ë³„ ìˆ˜ìµì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì •ì‚° ë‚´ì—­ ì¡°íšŒ ê¸°ëŠ¥ ì œê³µ

## ğŸ”¥ì„±ëŠ¥ ìµœì í™”

1. Batch ì‘ì—… : 
   [Reader ìµœì í™”ì™€ íŒŒí‹°ì…”ë‹ ë„ì…](https://ranny-devlog.tistory.com/entry/%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-300%EB%A7%8C-%EA%B1%B4%EC%9D%98-%EB%B0%B0%EC%B9%98-%EC%9E%91%EC%97%85%EC%9D%84-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%ED%95%B4%EB%B3%B4%EC%9E%90-8235-%EA%B0%9C%EC%84%A0)

| ë‹¨ê³„ | ë°ì´í„° ê·œëª¨ | ì²˜ë¦¬ì‹œê°„ | ê°œì„ ìœ¨ |
| --- | --- | --- | --- |
| ìµœì í™” ì „ | 300ë§Œ ê±´ | 90ë¶„ + | - |
| 1ì°¨ ìµœì í™” | 300ë§Œ ê±´ | 34ë¶„ 6ì´ˆ | 62.22% â†“ |
| 2ì°¨ ìµœì í™” | 300ë§Œ ê±´ | 6ë¶„ 29ì´ˆ | 82.35% â†“ |

- 1ì°¨ ìµœì í™” : ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±, ì¿¼ë¦¬ ìµœì í™”, Reader ë¦¬íŒ©í† ë§ (API í˜ì´ì§• ì ìš©, íŠ¹ì • Reader JDBC ì§ì ‘ ì‚¬ìš©)
- 2ì°¨ ìµœì í™” : Spring Batch íŒŒí‹°ì…”ë‹ ë„ì…, Writer saveAllë¡œ ì €ì¥


2. í†µê³„ ì¡°íšŒ API : ë‹¤ì¤‘ ì»¬ëŸ¼ ì¸ë±ì‹±ì„ í™œìš©
    -  **ì¡°íšŒ ì¿¼ë¦¬ ì†ë„ 7798ms -> 1.474ms**

| ë‹¨ê³„ | ë°ì´í„° ê·œëª¨ | TPS | ê°œì„ ìœ¨ | ì‘ë‹µ ì‹œê°„ | ê°œì„ ìœ¨ |
| --- | --- | --- | --- |--- | -- |
| ìµœì í™” ì „ | 50ë§Œ ê±´ | 0.77 /sec | - | 12,827 ms | - |
| ìµœì í™” í›„ | 50ë§Œ ê±´ | 48.4 /sec | 6185.71% â†‘ | 15 ms | 99.88% â†“ |

- í†µê³„ ì¡°íšŒ ì‹œ ìì£¼ ì‚¬ìš©ë˜ëŠ” created_atê³¼ daily_views ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì¤‘ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì •ë ¬ ë° ì „ì²´ ìŠ¤ìº”ì„ ì œê±°í•˜ê³ , í•„ìš”í•œ ë°ì´í„°ë§Œ ë¹ ë¥´ê²Œ ì¡°íšŒë  ìˆ˜ ìˆë„ë¡ ìµœì í™”
- ë‹¤ì¤‘ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ í†µí•´ ìƒìœ„ 5ê°œì˜ ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ ì¶”ì¶œí•˜ë„ë¡ í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë°ì´í„° ì ‘ê·¼ì„ ì¤„ì´ê³ , ì²˜ë¦¬ ì‹œê°„ì„ ëŒ€í­ ë‹¨ì¶•

3. ì •ì‚° ì¡°íšŒ API : Redis ìºì‹± í™œìš©
   - **ì¡°íšŒ API ì‘ë‹µ ì†ë„ 1371ms -> 392ms**

| ë‹¨ê³„ | ë°ì´í„° ê·œëª¨ | TPS | ê°œì„ ìœ¨ | ì‘ë‹µ ì‹œê°„ | ê°œì„ ìœ¨ |
| --- | --- | --- | --- |--- | -- |
| ìµœì í™” ì „ | 50ë§Œ ê±´ | 2.3 /sec | - | 27,813 ms | - |
| ìµœì í™” í›„ | 50ë§Œ ê±´ | 15.1 /sec| 556.52% â†‘ | 2,688 ms | 90.34% â†“ |

- Read-Aside ìºì‹± ì „ëµì„ ì ìš©
- Redisì— ìºì‹±ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ DB ì¡°íšŒë¥¼ ìƒëµí•˜ê³ , ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ìµœì í™”

## ğŸ’­ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • ë° íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •

- ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ -> MSA(MicroService Architecture) ì „í™˜
  
(ë§í¬ ì¶”ê°€ ì˜ˆì •)

### íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê²½í—˜
- [Redisì—ì„œ List\<Dto\> ì—­ì§ë ¬í™” ë¬¸ì œ í•´ê²°](https://ranny-devlog.tistory.com/entry/%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-Redis%EC%97%90%EC%84%9C-ListDto-%EC%97%AD%EC%A7%81%EB%A0%AC%ED%99%94-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95)



